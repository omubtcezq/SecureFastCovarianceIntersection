%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%   Identification
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{BNPackages/BNMathMacros}[2019/11/04 BN Mathe Macros]

% Changes 2019/11/04
% * checks for ifacconf added
%
% Changes 2018/02/18
% * amsthm added
%
% Changes 2018/02/04
% * definition of rvec adapted
%
% Changes 2017/08/16
% * \est and \pred removed


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%   Preliminary declarations
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{bm} % correct bold symbols, like \bm
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amssymb}
\@ifclassloaded{ifacconf}{% incompatible with ifacconf
 \typeout{Documentclass is ifacconf, some packages will not be loaded}%
}{%
 \RequirePackage{amsthm}%
}
\RequirePackage{mathrsfs}
\RequirePackage{dsfont} % double stroke symbols like IR
%\RequirePackage[single]{accents} % own accents
%\RequirePackage{exscale} % Scaling of Math Symbols?


%------------------------------------------------------------
% Mathematical Formulae
%------------------------------------------------------------

\@ifclassloaded{ifacconf}{% incompatible with ifacconf
 \typeout{Documentclass is ifacconf, command \vec is changed}%
 % solve problem with \vec:
 \def\@bfvec#1{\underline{#1}}
}{%
}

\newcommand{\rv}[1]{\ensuremath{{\boldsymbol{\mathrm{#1}}}}}
\renewcommand{\vec}[1]{\ensuremath{{\underline{#1}}}}
%\newcommand{\rvec}[1]{\ensuremath{{\boldsymbol{\underline{\mathrm{#1}}}}}}
\newcommand{\rvec}[1]{\ensuremath{{\rv{\vec{#1}}}}}
\newcommand{\mat}[1]{{\ensuremath{{\mathbf{#1}}}}}

\newcommand{\zero}{{\ensuremath{\vec{0}}}}

% Mean
\newcommand{\mvec}[1]{{\ensuremath{\hat{\rvec{#1}} }}}

% midpoint
\newcommand{\cvec}[1]{{\ensuremath{\vec{\hat{#1}} }}}

% bar vec
\newcommand{\bvec}[1]{{\ensuremath{\vec{\bar{#1}} }}}

% random error
\newcommand{\ervec}[1]{{\ensuremath{\tilde{\rvec{#1}} }}}

% error covariance matrix
\newcommand{\ermat}[1]{
	{\ensuremath{\widetilde{\mat{#1}} }}%
}

% matrix with bar
\newcommand{\bmat}[1]{
	{\ensuremath{\bar{\mat{#1}} }}%
}

% ellipsoid
\newcommand{\ellip}{{\ensuremath{\mathcal{E}}}}

%------------------------------------------------------------
% Operators
%------------------------------------------------------------

\def\T{\ensuremath{^\mathrm{T}}} % transpose
\newcommand{\inv}{\ensuremath{^{-1}}}
\newcommand{\invT}{\ensuremath{^{-\mathrm{T}}}}
\newcommand{\nk}{{k+1}}
\newcommand{\pk}{{k-1}}

%------------------------------------------------------------
% Mathematical Functions
%------------------------------------------------------------

\renewcommand{\arg}{\operatorname*{arg}}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\E}{E}

\DeclareMathOperator{\rank}{rank}

\DeclareMathOperator{\trace}{trace}
\DeclareMathOperator*{\Var}{Var}


%------------------------------------------------------------
% Abbreviations
%------------------------------------------------------------

\newcommand{\op}[1]{{\ensuremath{\operatorfont{#1}}}}
%\newcommand{\pred}{{\ensuremath{\operatorfont{p}}}}
%\newcommand{\est}{{\ensuremath{\operatorfont{e}}}}

\newcommand{\NewB}{\ensuremath{\mathds{R}}}
\newcommand{\NewC}{\ensuremath{\mathds{C}}}
\newcommand{\NewN}{\ensuremath{\mathds{N}}}
\newcommand{\NewR}{\ensuremath{\mathds{R}}}
\newcommand{\NewZ}{\ensuremath{\mathds{Z}}}
\newcommand{\IR}{\NewR}
\newcommand{\IN}{\NewN}
\newcommand{\IZ}{\NewZ}
\newcommand{\IC}{\NewC}


\newcommand{\PDF}{probability density function}

\newcommand{\Gauss}{{\mathcal{N}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%%   Topics
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%------------------------------------------------------------
% DDF
%------------------------------------------------------------

\newcommand{\CI}{\op{CI}\xspace}
\newcommand{\EI}{\op{EI}\xspace}
\newcommand{\ICI}{\op{ICI}\xspace}
\newcommand{\BC}{\op{B\!/\!C}\xspace}

\newcommand{\EMD}{\op{EMD}\xspace}

\newcommand{\sensornode}[1]{\ensuremath{{\mathsf{S #1}}}}

\newcommand{\fus}{\ensuremath{\op{fus}}}
